<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/Echobox/src/main/java/com/EchoBox/config/OpenApiConfig.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Echobox/src/main/java/com/EchoBox/config/OpenApiConfig.java" />
              <option name="updatedContent" value="package com.EchoBox.config;&#10;&#10;import io.swagger.v3.oas.annotations.OpenAPIDefinition;&#10;import io.swagger.v3.oas.annotations.info.Info;&#10;import io.swagger.v3.oas.annotations.security.SecurityRequirement;&#10;import io.swagger.v3.oas.models.Components;&#10;import io.swagger.v3.oas.models.OpenAPI;&#10;import io.swagger.v3.oas.models.security.SecurityScheme;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;&#10;@Configuration&#10;@OpenAPIDefinition(&#10;    info = @Info(title = &quot;Echobox API&quot;, version = &quot;1.0&quot;, description = &quot;Echobox API Documentation&quot;),&#10;    security = @SecurityRequirement(name = &quot;bearerAuth&quot;)&#10;)&#10;public class OpenApiConfig {&#10;&#10;    @Bean&#10;    public OpenAPI customOpenAPI() {&#10;        return new OpenAPI()&#10;                .components(new Components()&#10;                        .addSecuritySchemes(&quot;bearerAuth&quot;,&#10;                                new SecurityScheme()&#10;                                        .type(SecurityScheme.Type.HTTP)&#10;                                        .scheme(&quot;bearer&quot;)&#10;                                        .bearerFormat(&quot;JWT&quot;)&#10;                                        .in(SecurityScheme.In.HEADER)&#10;                                        .name(&quot;Authorization&quot;)&#10;                        )&#10;                );&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Echobox/src/main/java/com/EchoBox/exception/ErrorCode.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Echobox/src/main/java/com/EchoBox/exception/ErrorCode.java" />
              <option name="originalContent" value="package com.EchoBox.exception;&#10;&#10;import lombok.Getter;&#10;&#10;/**&#10; * Enumeration of all error codes in the system.&#10; * Each error has a unique code that can be used to fetch localized messages.&#10; */&#10;&#10;@Getter&#10;public enum ErrorCode {&#10;    // Generic errors (1000-1099)&#10;    GENERIC_ERROR(&quot;ERR_1000&quot;),&#10;    VALIDATION_ERROR(&quot;ERR_1001&quot;),&#10;    INVALID_INPUT(&quot;ERR_1002&quot;),&#10;    RESOURCE_NOT_FOUND(&quot;ERR_1003&quot;),&#10;    RESOURCE_ALREADY_EXISTS(&quot;ERR_1004&quot;),&#10;&#10;    // User errors (2000-2099)&#10;    USER_NOT_FOUND(&quot;ERR_2000&quot;),&#10;    USER_ALREADY_EXISTS(&quot;ERR_2001&quot;),&#10;    USER_INVALID_EMAIL(&quot;ERR_2002&quot;),&#10;    USER_INVALID_DATA(&quot;ERR_2003&quot;),&#10;&#10;    // Feedback errors (3000-3099)&#10;    FEEDBACK_NOT_FOUND(&quot;ERR_3000&quot;),&#10;    FEEDBACK_INVALID_DATA(&quot;ERR_3001&quot;),&#10;    FEEDBACK_CANNOT_DELETE(&quot;ERR_3002&quot;),&#10;&#10;    // Reply errors (4000-4099)&#10;    REPLY_NOT_FOUND(&quot;ERR_4000&quot;),&#10;    REPLY_INVALID_DATA(&quot;ERR_4001&quot;),&#10;&#10;    // Company errors (5000-5099)&#10;    COMPANY_NOT_FOUND(&quot;ERR_5000&quot;),&#10;    COMPANY_ALREADY_EXISTS(&quot;ERR_5001&quot;),&#10;    COMPANY_INVALID_DATA(&quot;ERR_5002&quot;),&#10;&#10;    // Category errors (6000-6099)&#10;    CATEGORY_NOT_FOUND(&quot;ERR_6000&quot;),&#10;    CATEGORY_ALREADY_EXISTS(&quot;ERR_6001&quot;),&#10;    CATEGORY_INVALID_DATA(&quot;ERR_6002&quot;),&#10;&#10;    // Status errors (7000-7099)&#10;    STATUS_NOT_FOUND(&quot;ERR_7000&quot;),&#10;    STATUS_INVALID_DATA(&quot;ERR_7001&quot;),&#10;&#10;    // Database errors (8000-8099)&#10;    DATABASE_ERROR(&quot;ERR_8000&quot;),&#10;    DATABASE_CONNECTION_ERROR(&quot;ERR_8001&quot;);&#10;&#10;    private final String code;&#10;&#10;    ErrorCode(String code) {&#10;        this.code = code;&#10;    }&#10;&#10;}&#10;" />
              <option name="updatedContent" value="package com.EchoBox.exception;&#10;&#10;import lombok.Getter;&#10;&#10;/**&#10; * Enumeration of all error codes in the system.&#10; * Each error has a unique code that can be used to fetch localized messages.&#10; */&#10;&#10;@Getter&#10;public enum ErrorCode {&#10;    // Generic errors (1000-1099)&#10;    GENERIC_ERROR(&quot;ERR_1000&quot;),&#10;    VALIDATION_ERROR(&quot;ERR_1001&quot;),&#10;    INVALID_INPUT(&quot;ERR_1002&quot;),&#10;    RESOURCE_NOT_FOUND(&quot;ERR_1003&quot;),&#10;    RESOURCE_ALREADY_EXISTS(&quot;ERR_1004&quot;),&#10;&#10;    // User errors (2000-2099)&#10;    USER_NOT_FOUND(&quot;ERR_2000&quot;),&#10;    USER_ALREADY_EXISTS(&quot;ERR_2001&quot;),&#10;    USER_INVALID_EMAIL(&quot;ERR_2002&quot;),&#10;    USER_INVALID_DATA(&quot;ERR_2003&quot;),&#10;&#10;    // Feedback errors (3000-3099)&#10;    FEEDBACK_NOT_FOUND(&quot;ERR_3000&quot;),&#10;    FEEDBACK_INVALID_DATA(&quot;ERR_3001&quot;),&#10;    FEEDBACK_CANNOT_DELETE(&quot;ERR_3002&quot;),&#10;&#10;    // Reply errors (4000-4099)&#10;    REPLY_NOT_FOUND(&quot;ERR_4000&quot;),&#10;    REPLY_INVALID_DATA(&quot;ERR_4001&quot;),&#10;&#10;    // Company errors (5000-5099)&#10;    COMPANY_NOT_FOUND(&quot;ERR_5000&quot;),&#10;    COMPANY_ALREADY_EXISTS(&quot;ERR_5001&quot;),&#10;    COMPANY_INVALID_DATA(&quot;ERR_5002&quot;),&#10;&#10;    // Category errors (6000-6099)&#10;    CATEGORY_NOT_FOUND(&quot;ERR_6000&quot;),&#10;    CATEGORY_ALREADY_EXISTS(&quot;ERR_6001&quot;),&#10;    CATEGORY_INVALID_DATA(&quot;ERR_6002&quot;),&#10;&#10;    // Status errors (7000-7099)&#10;    STATUS_NOT_FOUND(&quot;ERR_7000&quot;),&#10;    STATUS_INVALID_DATA(&quot;ERR_7001&quot;),&#10;&#10;    // Database errors (8000-8099)&#10;    DATABASE_ERROR(&quot;ERR_8000&quot;),&#10;    DATABASE_CONNECTION_ERROR(&quot;ERR_8001&quot;),&#10;&#10;    // Authentication/Authorization errors (9000-9099)&#10;    UNAUTHORIZED_ACCESS(&quot;ERR_9000&quot;),&#10;    INVALID_TOKEN(&quot;ERR_9001&quot;),&#10;    TOKEN_EXPIRED(&quot;ERR_9002&quot;),&#10;    INSUFFICIENT_PRIVILEGES(&quot;ERR_9003&quot;);&#10;&#10;    private final String code;&#10;&#10;    ErrorCode(String code) {&#10;        this.code = code;&#10;    }&#10;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Echobox/src/main/java/com/EchoBox/exception/GlobalExceptionHandler.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Echobox/src/main/java/com/EchoBox/exception/GlobalExceptionHandler.java" />
              <option name="originalContent" value="package com.EchoBox.exception;&#10;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;import jakarta.validation.ConstraintViolation;&#10;import jakarta.validation.ConstraintViolationException;&#10;import org.springframework.context.MessageSource;&#10;import org.springframework.context.i18n.LocaleContextHolder;&#10;import org.springframework.http.HttpStatus;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.validation.FieldError;&#10;import org.springframework.web.bind.MethodArgumentNotValidException;&#10;import org.springframework.web.bind.annotation.ExceptionHandler;&#10;import org.springframework.web.bind.annotation.RestControllerAdvice;&#10;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;import java.util.Locale;&#10;&#10;/**&#10; * Global exception handler for all controllers.&#10; * Intercepts exceptions and returns standardized error responses with localized messages.&#10; */&#10;@RestControllerAdvice&#10;public class GlobalExceptionHandler {&#10;&#10;    private final MessageSource messageSource;&#10;&#10;    public GlobalExceptionHandler(MessageSource messageSource) {&#10;        this.messageSource = messageSource;&#10;    }&#10;&#10;    /**&#10;     * Handle custom EchoboxException&#10;     */&#10;    @ExceptionHandler(EchoboxException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleEchoboxException(&#10;            EchoboxException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ex.getErrorCode().getCode(),&#10;            ex.getArgs(),&#10;            ex.getMessage(),&#10;            locale&#10;        );&#10;&#10;        HttpStatus status = determineHttpStatus(ex);&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ex.getErrorCode().getCode())&#10;            .message(message)&#10;            .status(status.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, status);&#10;    }&#10;&#10;    /**&#10;     * Handle ResourceNotFoundException&#10;     */&#10;    @ExceptionHandler(ResourceNotFoundException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleResourceNotFoundException(&#10;            ResourceNotFoundException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ex.getErrorCode().getCode(),&#10;            ex.getArgs(),&#10;            ex.getMessage(),&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ex.getErrorCode().getCode())&#10;            .message(message)&#10;            .status(HttpStatus.NOT_FOUND.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.NOT_FOUND);&#10;    }&#10;&#10;    /**&#10;     * Handle validation errors from @Valid annotation&#10;     */&#10;    @ExceptionHandler(MethodArgumentNotValidException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleValidationException(&#10;            MethodArgumentNotValidException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;&#10;        List&lt;ErrorResponse.FieldError&gt; fieldErrors = new ArrayList&lt;&gt;();&#10;        for (FieldError error : ex.getBindingResult().getFieldErrors()) {&#10;            fieldErrors.add(ErrorResponse.FieldError.builder()&#10;                .field(error.getField())&#10;                .message(error.getDefaultMessage())&#10;                .rejectedValue(error.getRejectedValue())&#10;                .build());&#10;        }&#10;&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.VALIDATION_ERROR.getCode(),&#10;            null,&#10;            &quot;Validation error&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.VALIDATION_ERROR.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.BAD_REQUEST.value())&#10;            .path(request.getRequestURI())&#10;            .fieldErrors(fieldErrors)&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.BAD_REQUEST);&#10;    }&#10;&#10;    /**&#10;     * Handle constraint violation exceptions&#10;     */&#10;    @ExceptionHandler(ConstraintViolationException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleConstraintViolationException(&#10;            ConstraintViolationException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;&#10;        List&lt;ErrorResponse.FieldError&gt; fieldErrors = new ArrayList&lt;&gt;();&#10;        for (ConstraintViolation&lt;?&gt; violation : ex.getConstraintViolations()) {&#10;            fieldErrors.add(ErrorResponse.FieldError.builder()&#10;                .field(violation.getPropertyPath().toString())&#10;                .message(violation.getMessage())&#10;                .rejectedValue(violation.getInvalidValue())&#10;                .build());&#10;        }&#10;&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.VALIDATION_ERROR.getCode(),&#10;            null,&#10;            &quot;Validation error&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.VALIDATION_ERROR.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.BAD_REQUEST.value())&#10;            .path(request.getRequestURI())&#10;            .fieldErrors(fieldErrors)&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.BAD_REQUEST);&#10;    }&#10;&#10;    /**&#10;     * Handle all other exceptions&#10;     */&#10;    @ExceptionHandler(Exception.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleGenericException(&#10;            Exception ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.GENERIC_ERROR.getCode(),&#10;            null,&#10;            &quot;An unexpected error occurred&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.GENERIC_ERROR.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.INTERNAL_SERVER_ERROR.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.INTERNAL_SERVER_ERROR);&#10;    }&#10;&#10;    /**&#10;     * Determine HTTP status based on exception type&#10;     */&#10;    private HttpStatus determineHttpStatus(EchoboxException ex) {&#10;        ErrorCode errorCode = ex.getErrorCode();&#10;&#10;        // Resource not found errors&#10;        if (errorCode.getCode().endsWith(&quot;_NOT_FOUND&quot;)) {&#10;            return HttpStatus.NOT_FOUND;&#10;        }&#10;&#10;        // Already exists errors&#10;        if (errorCode.getCode().endsWith(&quot;_ALREADY_EXISTS&quot;)) {&#10;            return HttpStatus.CONFLICT;&#10;        }&#10;&#10;        // Validation and invalid data errors&#10;        if (errorCode.getCode().contains(&quot;INVALID&quot;) ||&#10;            errorCode.getCode().contains(&quot;VALIDATION&quot;)) {&#10;            return HttpStatus.BAD_REQUEST;&#10;        }&#10;&#10;        // Database errors&#10;        if (errorCode.getCode().startsWith(&quot;ERR_8&quot;)) {&#10;            return HttpStatus.INTERNAL_SERVER_ERROR;&#10;        }&#10;&#10;        // Default to bad request&#10;        return HttpStatus.BAD_REQUEST;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.EchoBox.exception;&#10;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;import jakarta.validation.ConstraintViolation;&#10;import jakarta.validation.ConstraintViolationException;&#10;import org.springframework.context.MessageSource;&#10;import org.springframework.context.i18n.LocaleContextHolder;&#10;import org.springframework.http.HttpStatus;&#10;import org.springframework.http.ResponseEntity;&#10;import org.springframework.validation.FieldError;&#10;import org.springframework.web.bind.MethodArgumentNotValidException;&#10;import org.springframework.web.bind.annotation.ExceptionHandler;&#10;import org.springframework.web.bind.annotation.RestControllerAdvice;&#10;&#10;import java.util.ArrayList;&#10;import java.util.List;&#10;import java.util.Locale;&#10;&#10;/**&#10; * Global exception handler for all controllers.&#10; * Intercepts exceptions and returns standardized error responses with localized messages.&#10; */&#10;@RestControllerAdvice&#10;public class GlobalExceptionHandler {&#10;&#10;    private final MessageSource messageSource;&#10;&#10;    public GlobalExceptionHandler(MessageSource messageSource) {&#10;        this.messageSource = messageSource;&#10;    }&#10;&#10;    /**&#10;     * Handle custom EchoboxException&#10;     */&#10;    @ExceptionHandler(EchoboxException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleEchoboxException(&#10;            EchoboxException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ex.getErrorCode().getCode(),&#10;            ex.getArgs(),&#10;            ex.getMessage(),&#10;            locale&#10;        );&#10;&#10;        HttpStatus status = determineHttpStatus(ex);&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ex.getErrorCode().getCode())&#10;            .message(message)&#10;            .status(status.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, status);&#10;    }&#10;&#10;    /**&#10;     * Handle ResourceNotFoundException&#10;     */&#10;    @ExceptionHandler(ResourceNotFoundException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleResourceNotFoundException(&#10;            ResourceNotFoundException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ex.getErrorCode().getCode(),&#10;            ex.getArgs(),&#10;            ex.getMessage(),&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ex.getErrorCode().getCode())&#10;            .message(message)&#10;            .status(HttpStatus.NOT_FOUND.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.NOT_FOUND);&#10;    }&#10;&#10;    /**&#10;     * Handle validation errors from @Valid annotation&#10;     */&#10;    @ExceptionHandler(MethodArgumentNotValidException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleValidationException(&#10;            MethodArgumentNotValidException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;&#10;        List&lt;ErrorResponse.FieldError&gt; fieldErrors = new ArrayList&lt;&gt;();&#10;        for (FieldError error : ex.getBindingResult().getFieldErrors()) {&#10;            fieldErrors.add(ErrorResponse.FieldError.builder()&#10;                .field(error.getField())&#10;                .message(error.getDefaultMessage())&#10;                .rejectedValue(error.getRejectedValue())&#10;                .build());&#10;        }&#10;&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.VALIDATION_ERROR.getCode(),&#10;            null,&#10;            &quot;Validation error&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.VALIDATION_ERROR.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.BAD_REQUEST.value())&#10;            .path(request.getRequestURI())&#10;            .fieldErrors(fieldErrors)&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.BAD_REQUEST);&#10;    }&#10;&#10;    /**&#10;     * Handle constraint violation exceptions&#10;     */&#10;    @ExceptionHandler(ConstraintViolationException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleConstraintViolationException(&#10;            ConstraintViolationException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;&#10;        List&lt;ErrorResponse.FieldError&gt; fieldErrors = new ArrayList&lt;&gt;();&#10;        for (ConstraintViolation&lt;?&gt; violation : ex.getConstraintViolations()) {&#10;            fieldErrors.add(ErrorResponse.FieldError.builder()&#10;                .field(violation.getPropertyPath().toString())&#10;                .message(violation.getMessage())&#10;                .rejectedValue(violation.getInvalidValue())&#10;                .build());&#10;        }&#10;&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.VALIDATION_ERROR.getCode(),&#10;            null,&#10;            &quot;Validation error&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.VALIDATION_ERROR.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.BAD_REQUEST.value())&#10;            .path(request.getRequestURI())&#10;            .fieldErrors(fieldErrors)&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.BAD_REQUEST);&#10;    }&#10;&#10;    /**&#10;     * Handle Spring Security authentication exceptions&#10;     */&#10;    @ExceptionHandler(org.springframework.security.core.AuthenticationException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleAuthenticationException(&#10;            org.springframework.security.core.AuthenticationException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.UNAUTHORIZED_ACCESS.getCode(),&#10;            null,&#10;            &quot;Unauthorized access - authentication required&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.UNAUTHORIZED_ACCESS.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.UNAUTHORIZED.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.UNAUTHORIZED);&#10;    }&#10;&#10;    /**&#10;     * Handle Spring Security access denied exceptions&#10;     */&#10;    @ExceptionHandler(org.springframework.security.access.AccessDeniedException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleAccessDeniedException(&#10;            org.springframework.security.access.AccessDeniedException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.INSUFFICIENT_PRIVILEGES.getCode(),&#10;            null,&#10;            &quot;Insufficient privileges to access this resource&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.INSUFFICIENT_PRIVILEGES.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.FORBIDDEN.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.FORBIDDEN);&#10;    }&#10;&#10;    /**&#10;     * Handle JWT token exceptions&#10;     */&#10;    @ExceptionHandler(io.jsonwebtoken.JwtException.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleJwtException(&#10;            io.jsonwebtoken.JwtException ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        ErrorCode errorCode = ErrorCode.INVALID_TOKEN;&#10;        &#10;        // Check if it's an expired token&#10;        if (ex instanceof io.jsonwebtoken.ExpiredJwtException) {&#10;            errorCode = ErrorCode.TOKEN_EXPIRED;&#10;        }&#10;&#10;        String message = messageSource.getMessage(&#10;            errorCode.getCode(),&#10;            null,&#10;            ex.getMessage(),&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(errorCode.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.UNAUTHORIZED.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.UNAUTHORIZED);&#10;    }&#10;&#10;    /**&#10;     * Handle all other exceptions&#10;     */&#10;    @ExceptionHandler(Exception.class)&#10;    public ResponseEntity&lt;ErrorResponse&gt; handleGenericException(&#10;            Exception ex,&#10;            HttpServletRequest request) {&#10;&#10;        Locale locale = LocaleContextHolder.getLocale();&#10;        String message = messageSource.getMessage(&#10;            ErrorCode.GENERIC_ERROR.getCode(),&#10;            null,&#10;            &quot;An unexpected error occurred&quot;,&#10;            locale&#10;        );&#10;&#10;        ErrorResponse errorResponse = ErrorResponse.builder()&#10;            .errorCode(ErrorCode.GENERIC_ERROR.getCode())&#10;            .message(message)&#10;            .status(HttpStatus.INTERNAL_SERVER_ERROR.value())&#10;            .path(request.getRequestURI())&#10;            .build();&#10;&#10;        return new ResponseEntity&lt;&gt;(errorResponse, HttpStatus.INTERNAL_SERVER_ERROR);&#10;    }&#10;&#10;    /**&#10;     * Determine HTTP status based on exception type&#10;     */&#10;    private HttpStatus determineHttpStatus(EchoboxException ex) {&#10;        ErrorCode errorCode = ex.getErrorCode();&#10;&#10;        // Resource not found errors&#10;        if (errorCode.getCode().endsWith(&quot;_NOT_FOUND&quot;)) {&#10;            return HttpStatus.NOT_FOUND;&#10;        }&#10;&#10;        // Already exists errors&#10;        if (errorCode.getCode().endsWith(&quot;_ALREADY_EXISTS&quot;)) {&#10;            return HttpStatus.CONFLICT;&#10;        }&#10;&#10;        // Validation and invalid data errors&#10;        if (errorCode.getCode().contains(&quot;INVALID&quot;) ||&#10;            errorCode.getCode().contains(&quot;VALIDATION&quot;)) {&#10;            return HttpStatus.BAD_REQUEST;&#10;        }&#10;&#10;        // Database errors&#10;        if (errorCode.getCode().startsWith(&quot;ERR_8&quot;)) {&#10;            return HttpStatus.INTERNAL_SERVER_ERROR;&#10;        }&#10;&#10;        // Default to bad request&#10;        return HttpStatus.BAD_REQUEST;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Echobox/src/main/resources/messages.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Echobox/src/main/resources/messages.properties" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="# Authentication/Authorization error messages&#10;ERR_9000=Unauthorized access - authentication required&#10;ERR_9001=Invalid or malformed token&#10;ERR_9002=Token has expired&#10;ERR_9003=Insufficient privileges to access this resource&#10;&#10;# Generic error messages (if not already present)&#10;ERR_1000=An unexpected error occurred&#10;ERR_1001=Validation error&#10;ERR_1002=Invalid input data&#10;ERR_1003=Resource not found&#10;ERR_1004=Resource already exists&#10;&#10;# User error messages&#10;ERR_2000=User not found&#10;ERR_2001=User already exists&#10;ERR_2002=Invalid email format&#10;ERR_2003=Invalid user data&#10;&#10;# Database error messages&#10;ERR_8000=Database error occurred&#10;ERR_8001=Database connection error" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Echobox/src/main/resources/messages_en.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Echobox/src/main/resources/messages_en.properties" />
              <option name="originalContent" value="# English messages&#10;&#10;# Generic errors (1000-1099)&#10;ERR_1000=An unexpected error occurred&#10;ERR_1001=Validation error in the submitted data&#10;ERR_1002=Invalid input provided&#10;ERR_1003=Resource not found&#10;ERR_1004=Resource already exists&#10;&#10;# User errors (2000-2099)&#10;ERR_2000=User not found&#10;ERR_2001=User already exists&#10;ERR_2002=Invalid email format&#10;ERR_2003=Invalid user data&#10;&#10;# Feedback errors (3000-3099)&#10;ERR_3000=Feedback not found&#10;ERR_3001=Invalid feedback data&#10;ERR_3002=Cannot delete feedback&#10;&#10;# Reply errors (4000-4099)&#10;ERR_4000=Reply not found&#10;ERR_4001=Invalid reply data&#10;&#10;# Company errors (5000-5099)&#10;ERR_5000=Company not found&#10;ERR_5001=Company already exists&#10;ERR_5002=Invalid company data&#10;&#10;# Category errors (6000-6099)&#10;ERR_6000=Category not found&#10;ERR_6001=Category already exists&#10;ERR_6002=Invalid category data&#10;&#10;# Status errors (7000-7099)&#10;ERR_7000=Status not found&#10;ERR_7001=Invalid status data&#10;&#10;# Database errors (8000-8099)&#10;ERR_8000=Database error occurred&#10;ERR_8001=Database connection error&#10;# Default messages (English)&#10;&#10;# Generic errors (1000-1099)&#10;ERR_1000=An unexpected error occurred&#10;ERR_1001=Validation error in the submitted data&#10;ERR_1002=Invalid input provided&#10;ERR_1003=Resource not found&#10;ERR_1004=Resource already exists&#10;&#10;# User errors (2000-2099)&#10;ERR_2000=User not found&#10;ERR_2001=User already exists&#10;ERR_2002=Invalid email format&#10;ERR_2003=Invalid user data&#10;&#10;# Feedback errors (3000-3099)&#10;ERR_3000=Feedback not found&#10;ERR_3001=Invalid feedback data&#10;ERR_3002=Cannot delete feedback&#10;&#10;# Reply errors (4000-4099)&#10;ERR_4000=Reply not found&#10;ERR_4001=Invalid reply data&#10;&#10;# Company errors (5000-5099)&#10;ERR_5000=Company not found&#10;ERR_5001=Company already exists&#10;ERR_5002=Invalid company data&#10;&#10;# Category errors (6000-6099)&#10;ERR_6000=Category not found&#10;ERR_6001=Category already exists&#10;ERR_6002=Invalid category data&#10;&#10;# Status errors (7000-7099)&#10;ERR_7000=Status not found&#10;ERR_7001=Invalid status data&#10;&#10;# Database errors (8000-8099)&#10;ERR_8000=Database error occurred&#10;ERR_8001=Database connection error&#10;&#10;" />
              <option name="updatedContent" value="# English messages&#10;&#10;# Generic errors (1000-1099)&#10;ERR_1000=An unexpected error occurred&#10;ERR_1001=Validation error in the submitted data&#10;ERR_1002=Invalid input provided&#10;ERR_1003=Resource not found&#10;ERR_1004=Resource already exists&#10;&#10;# User errors (2000-2099)&#10;ERR_2000=User not found&#10;ERR_2001=User already exists&#10;ERR_2002=Invalid email format&#10;ERR_2003=Invalid user data&#10;&#10;# Feedback errors (3000-3099)&#10;ERR_3000=Feedback not found&#10;ERR_3001=Invalid feedback data&#10;ERR_3002=Cannot delete feedback&#10;&#10;# Reply errors (4000-4099)&#10;ERR_4000=Reply not found&#10;ERR_4001=Invalid reply data&#10;&#10;# Company errors (5000-5099)&#10;ERR_5000=Company not found&#10;ERR_5001=Company already exists&#10;ERR_5002=Invalid company data&#10;&#10;# Category errors (6000-6099)&#10;ERR_6000=Category not found&#10;ERR_6001=Category already exists&#10;ERR_6002=Invalid category data&#10;&#10;# Status errors (7000-7099)&#10;ERR_7000=Status not found&#10;ERR_7001=Invalid status data&#10;&#10;# Database errors (8000-8099)&#10;ERR_8000=Database error occurred&#10;ERR_8001=Database connection error&#10;&#10;# Authentication/Authorization errors (9000-9099)&#10;ERR_9000=Unauthorized access - authentication required&#10;ERR_9001=Invalid or malformed token&#10;ERR_9002=Token has expired&#10;ERR_9003=Insufficient privileges to access this resource" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/Echobox/src/main/resources/messages_pt.properties">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/Echobox/src/main/resources/messages_pt.properties" />
              <option name="originalContent" value="# Mensagens em Português&#10;&#10;# Erros genéricos (1000-1099)&#10;ERR_1000=Ocorreu um erro inesperado&#10;ERR_1001=Erro de validação nos dados submetidos&#10;ERR_1002=Entrada inválida fornecida&#10;ERR_1003=Recurso não encontrado&#10;ERR_1004=Recurso já existe&#10;&#10;# Erros de usuário (2000-2099)&#10;ERR_2000=Usuário não encontrado&#10;ERR_2001=Usuário já existe&#10;ERR_2002=Formato de email inválido&#10;ERR_2003=Dados de usuário inválidos&#10;&#10;# Erros de feedback (3000-3099)&#10;ERR_3000=Feedback não encontrado&#10;ERR_3001=Dados de feedback inválidos&#10;ERR_3002=Não é possível excluir o feedback&#10;&#10;# Erros de resposta (4000-4099)&#10;ERR_4000=Resposta não encontrada&#10;ERR_4001=Dados de resposta inválidos&#10;&#10;# Erros de empresa (5000-5099)&#10;ERR_5000=Empresa não encontrada&#10;ERR_5001=Empresa já existe&#10;ERR_5002=Dados de empresa inválidos&#10;&#10;# Erros de categoria (6000-6099)&#10;ERR_6000=Categoria não encontrada&#10;ERR_6001=Categoria já existe&#10;ERR_6002=Dados de categoria inválidos&#10;&#10;# Erros de status (7000-7099)&#10;ERR_7000=Status não encontrado&#10;ERR_7001=Dados de status inválidos&#10;&#10;# Erros de banco de dados (8000-8099)&#10;ERR_8000=Erro no banco de dados&#10;ERR_8001=Erro de conexão com o banco de dados&#10;&#10;&#10;" />
              <option name="updatedContent" value="# Mensagens em Portugu�s&#10;&#10;# Erros gen�ricos (1000-1099)&#10;ERR_1000=Ocorreu um erro inesperado&#10;ERR_1001=Erro de valida��o nos dados submetidos&#10;ERR_1002=Entrada inv�lida fornecida&#10;ERR_1003=Recurso n�o encontrado&#10;ERR_1004=Recurso j� existe&#10;&#10;# Erros de usu�rio (2000-2099)&#10;ERR_2000=Usu�rio n�o encontrado&#10;ERR_2001=Usu�rio j� existe&#10;ERR_2002=Formato de email inv�lido&#10;ERR_2003=Dados de usu�rio inv�lidos&#10;&#10;# Erros de feedback (3000-3099)&#10;ERR_3000=Feedback n�o encontrado&#10;ERR_3001=Dados de feedback inv�lidos&#10;ERR_3002=N�o � poss�vel excluir o feedback&#10;&#10;# Erros de resposta (4000-4099)&#10;ERR_4000=Resposta n�o encontrada&#10;ERR_4001=Dados de resposta inv�lidos&#10;&#10;# Erros de empresa (5000-5099)&#10;ERR_5000=Empresa n�o encontrada&#10;ERR_5001=Empresa j� existe&#10;ERR_5002=Dados de empresa inv�lidos&#10;&#10;# Erros de categoria (6000-6099)&#10;ERR_6000=Categoria n�o encontrada&#10;ERR_6001=Categoria j� existe&#10;ERR_6002=Dados de categoria inv�lidos&#10;&#10;# Erros de status (7000-7099)&#10;ERR_7000=Status n�o encontrado&#10;ERR_7001=Dados de status inv�lidos&#10;&#10;# Erros de banco de dados (8000-8099)&#10;ERR_8000=Erro no banco de dados&#10;ERR_8001=Erro de conex�o com o banco de dados&#10;&#10;# Erros de autentica��o/autorização (9000-9099)&#10;ERR_9000=Acesso n�o autorizado - autentica��o necess�ria&#10;ERR_9001=Token inv�lido ou malformado&#10;ERR_9002=Token expirado&#10;ERR_9003=Privil�gios insuficientes para acessar este recurso" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>